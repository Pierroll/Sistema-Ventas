{
  "meta": {
    "project": "Sistema de Ventas para Micro Empresas",
    "date": "2025-10-04",
    "prepared_by": "Generated by Software Development Manager"
  },
  "product_overview": "Sistema de Ventas para Micro Empresas es una aplicación web integral diseñada para gestionar ventas, inventario, clientes, compras, control financiero y administración en empresas pequeñas y medianas, mediante una plataforma moderna que centraliza procesos comerciales y administrativos para optimizar la eficiencia y visibilidad en tiempo real.",
  "core_goals": [
    "Automatizar y centralizar la gestión de ventas y operaciones comerciales para minimizar errores y optimizar procesos.",
    "Proveer un sistema seguro con autenticación y permisos basados en roles para controlar el acceso y la gestión de usuarios.",
    "Permitir manejo completo de inventarios y compras con actualización automática de stock.",
    "Generar reportes y documentos oficiales (facturas, recibos, cotizaciones) en múltiples formatos con trazabilidad (PDF, Excel, QR).",
    "Facilitar el control financiero diario mediante gestión de caja, créditos, abonos y reportes de flujo monetario.",
    "Brindar una interfaz web intuitiva y rápida con acceso basado en roles para diversos perfiles (administrador, vendedor, cajero, entre otros)."
  ],
  "key_features": [
    "Gestión completa de ventas que incluye creación de nuevas ventas, historial detallado, cancelación y administración de ventas a crédito.",
    "Administración robusta de productos con catálogo, categorías, unidades de medida, control de stock y soporte para importación desde Excel.",
    "Manejo integral de clientes con registro, búsqueda, historial de compras y seguimiento de créditos y deudas.",
    "Control financiero con módulos de caja, arqueos, manejo de monedas múltiples y auditorías de transacciones.",
    "Gestión administrativa con roles y permisos granulares, configuración del sistema, y administración de usuarios y perfiles.",
    "Generación automática de reportes en PDF y Excel para ventas, inventarios y finanzas con opciones de exportación y análisis.",
    "Seguridad reforzada mediante autenticación basada en sesiones, control de accesos, sanitización de entradas y prevención de SQL injection."
  ],
  "user_flow_summary": [
    "Usuario accede al módulo de ventas, selecciona productos y cantidades, calcula totales y gestiona cotizaciones opcionalmente, luego registra la venta y genera documentos PDF con códigos QR, con actualización automática del inventario.",
    "En el módulo de compras, el usuario selecciona proveedor, especifica productos y cantidades, registra la compra, actualiza inventario y genera documentación de compra en PDF.",
    "El cajero o vendedor accede al módulo de caja para registrar ingresos y egresos, realizar arqueos diarios que comparan montos teóricos contra reales y generan reportes de discrepancias.",
    "Administrador gestiona usuarios, permisos y perfiles, configura parámetros del sistema y revisa reportes de auditoría y calidad de código, manteniendo control integral del sistema."
  ],
  "validation_criteria": [
    "El sistema debe requerir autenticación y gestionar sesiones correctamente para acceso de usuarios.",
    "Todas las operaciones sensibles deben validar permisos basados en roles y realizar sanitización de entradas para prevenir riesgos de seguridad.",
    "Las ventas sólo pueden registrarse si la caja está abierta y el stock está disponible, asegurando actualización correcta del inventario con cada operación.",
    "Los documentos generados (facturas, recibos, cotizaciones) deben exportarse correctamente a PDF con códigos QR, y también deben poder exportarse datos a Excel.",
    "Los reportes deben generarse adecuadamente con datos precisos para períodos, clientes, productos y vendedores, y reflejar movimientos reales del sistema.",
    "El desempeño de carga y respuesta debe ser inferior a 2 segundos en operaciones clave para mantener la experiencia de usuario.",
    "La aplicación debe ser compatible con navegadores modernos y conservar la integridad de datos ante múltiples accesos concurrentes.",
    "Se debe verificar la ejecución de pruebas unitarias y análisis de calidad de código para asegurar cobertura y calidad del sistema."
  ],
  "code_summary": {
    "project_name": "Sistema de Ventas para Micro Empresas",
    "project_type": "PHP Web Application",
    "architecture": "MVC (Model-View-Controller)",
    "technology_stack": {
      "backend": {
        "language": "PHP",
        "framework": "Custom MVC Framework",
        "database": "MySQL",
        "server": "Apache/Nginx (localhost)",
        "port": 80,
        "dependencies": [
          "phpoffice/phpspreadsheet",
          "luecano/numero-a-letras",
          "phpmailer/phpmailer"
        ]
      },
      "frontend": {
        "html": "HTML5",
        "css": "Bootstrap, Custom CSS",
        "javascript": "jQuery, DataTables, Chart.js",
        "ui_framework": "Bootstrap",
        "libraries": [
          "jQuery",
          "DataTables",
          "Bootstrap",
          "Chart.js",
          "FPDF (for PDF generation)"
        ]
      }
    },
    "database_schema": {
      "database_name": "venta",
      "main_tables": [
        "usuarios",
        "clientes",
        "productos",
        "ventas",
        "detalle_ventas",
        "detalle_temp",
        "caja",
        "categorias",
        "medidas",
        "proveedores",
        "compras",
        "creditos",
        "abonos",
        "apartados",
        "cotizaciones",
        "empresa",
        "monedas",
        "permisos",
        "terminos"
      ]
    },
    "main_features": [
      {
        "module": "Sales Management",
        "features": [
          "New sale creation",
          "Sale history tracking",
          "PDF invoice generation",
          "Receipt generation",
          "Sale cancellation",
          "Credit sales management"
        ]
      },
      {
        "module": "Product Management",
        "features": [
          "Product catalog",
          "Category management",
          "Unit of measure management",
          "Stock control",
          "Product import from Excel",
          "Product search and filtering"
        ]
      },
      {
        "module": "Customer Management",
        "features": [
          "Customer registration",
          "Customer data management",
          "Customer search",
          "Customer history"
        ]
      },
      {
        "module": "User Management",
        "features": [
          "User authentication",
          "Role-based permissions",
          "User profile management",
          "Session management"
        ]
      },
      {
        "module": "Inventory Management",
        "features": [
          "Stock tracking",
          "Purchase management",
          "Supplier management",
          "Stock movements"
        ]
      },
      {
        "module": "Financial Management",
        "features": [
          "Cash register management",
          "Credit management",
          "Payment tracking",
          "Financial reports"
        ]
      },
      {
        "module": "Administration",
        "features": [
          "Company configuration",
          "Currency management",
          "System settings",
          "Permission management"
        ]
      },
      {
        "module": "Reports",
        "features": [
          "Sales reports",
          "PDF generation",
          "Financial reports",
          "Inventory reports"
        ]
      }
    ],
    "security_features": [
      "Session-based authentication",
      "Role-based access control",
      "Permission verification",
      "SQL injection prevention",
      "Input sanitization"
    ],
    "api_endpoints": {
      "authentication": [
        "POST /login",
        "POST /logout"
      ],
      "sales": [
        "GET /ventas",
        "POST /ventas/agregarVenta",
        "POST /ventas/cantidadVenta",
        "DELETE /ventas/deleteVenta",
        "POST /ventas/registrarVenta",
        "GET /ventas/historial",
        "GET /ventas/generarPdf",
        "POST /ventas/anularVenta"
      ],
      "products": [
        "GET /productos",
        "POST /productos",
        "PUT /productos",
        "DELETE /productos"
      ],
      "customers": [
        "GET /clientes",
        "POST /clientes",
        "PUT /clientes",
        "DELETE /clientes"
      ],
      "users": [
        "GET /usuarios",
        "POST /usuarios",
        "PUT /usuarios",
        "DELETE /usuarios"
      ]
    },
    "file_structure": {
      "controllers": [
        "Administracion.php",
        "Apartados.php",
        "Cajas.php",
        "Categorias.php",
        "Clientes.php",
        "Compras.php",
        "Cotizaciones.php",
        "Creditos.php",
        "Errors.php",
        "Home.php",
        "Landing.php",
        "Medidas.php",
        "Productos.php",
        "Proveedor.php",
        "Usuarios.php",
        "Ventas.php"
      ],
      "models": [
        "AdministracionModel.php",
        "ApartadosModel.php",
        "CajasModel.php",
        "CategoriasModel.php",
        "ClientesModel.php",
        "ComprasModel.php",
        "CotizacionesModel.php",
        "CreditosModel.php",
        "HomeModel.php",
        "LandingModel.php",
        "MedidasModel.php",
        "ProductosModel.php",
        "ProveedorModel.php",
        "UsuariosModel.php",
        "VentasModel.php"
      ],
      "views": [
        "admin/",
        "apartados/",
        "cajas/",
        "categorias/",
        "clientes/",
        "compras/",
        "cotizaciones/",
        "creditos/",
        "errors/",
        "landing/",
        "medidas/",
        "modals/",
        "productos/",
        "proveedor/",
        "templates/",
        "usuarios/",
        "ventas/"
      ]
    },
    "business_logic": {
      "sales_process": [
        "User authentication required",
        "Cash register must be open",
        "Product selection and quantity",
        "Customer selection (optional)",
        "Payment method selection",
        "Sale registration",
        "Stock update",
        "Receipt/invoice generation"
      ],
      "inventory_management": [
        "Stock tracking per product",
        "Automatic stock reduction on sales",
        "Stock restoration on sale cancellation",
        "Purchase management for stock replenishment"
      ],
      "user_permissions": [
        "Role-based access control",
        "Permission verification for each action",
        "Super admin (ID=1) has all permissions",
        "Session-based authentication"
      ]
    },
    "configuration": {
      "base_url": "http://localhost/venta/",
      "database": {
        "host": "localhost",
        "user": "root",
        "password": "",
        "database": "venta",
        "charset": "utf8"
      },
      "email": {
        "smtp_host": "smtp.gmail.com",
        "smtp_port": 465,
        "smtp_user": "correo@gmail.com",
        "smtp_password": "clave_correo"
      }
    },
    "testing_considerations": {
      "authentication_required": true,
      "session_management": true,
      "database_dependencies": true,
      "file_uploads": false,
      "external_apis": false,
      "pdf_generation": true,
      "excel_import": true
    }
  }
}
